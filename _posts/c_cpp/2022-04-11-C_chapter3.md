---
title: "[C] 자료형2-float, double_Chapter3"

categories:
  - cpp
tags:
  - [C언어, 자료형, 실수]

toc: true
toc_sticky: true
comments: true
use_math: true
date: 2022-04-11
last_modified_at: 2022-04-11
---

📌 **작성자 개발 환경** <br>
**OS** : Windows 10 <br>
**Language** : C<br>
**Tool** : Visual Studio Code<br>
{: .notice--primary}

이번 챕터에서는 float, double 등 실수를 다루는 자료형이 메모리 공간에 저장되는 원리를 정리하였다.

내용출처: [https://pang2h.tistory.com/293](https://pang2h.tistory.com/293) <br>

- 실수를 표현하는 방법에는 아래 2가지가 있다.
  - **고정 소수점 방식**
  - **부동 소수점 방식**

**1 : 고정 소수점 방식**

- 특정 비트를 기준으로 한쪽 비트를 실수의 정수 영역을 저장하도록 하고, 반대쪽 비트는 실수의 소수점 영역을 저장하도록 하는 방법

> 예: 123.456를 32bit 공간에 저장 => 16 bit는 정수 123 저장 / 나머지 16 bit는 소수 456 저장.

- 고정 소수점은 오차가 존재하지 않는다는 장점이 있다.
- 그러나 변수에 저장할 수 있는 실수의 범위가 상당히 제한적이다.
-  예를 들어, 16 bit는 65,536개의 숫자를 표현할 수 있는데, 부호를 표현하는 1 bit를 빼면 정수든 실수든 한쪽은 32,768개의 정수 중 하나만 표현할 수 있다. 또한 32 bit에서 정수, 소수 부분이 나눠진 것이기 때문에 메모리 공간에 비해 표현할 수 있는 수가 적다.

**2 : 부동 소수점 방식**

- 컴퓨터는 고정 소수점 방식의 문제로 인해 부동 소수점 방식을 채택하고 있다.
- 값 자체를 저장하는 것이 아니라, **값을 도출할 수 있는 수식에 대한 정보**를 저장하는 방식.
- 부동 소수점 방식은 아래 **IEEE** 표준안을 따른다. (출처: [https://bigpel66.oopy.io/library/c/chewing-c/4](https://bigpel66.oopy.io/library/c/chewing-c/4))


<img src="/assets/images/ieee float.png" width="530px" height="240px">
<img src="/assets/images/ieee double.png" width="530px" height="240px"><br>

- 부호, 지수부, 가수부에 대해 설명하기 전에 소수를 가진 10진수를 2진수로 변환하는 방법을 예시로 설명한다.
  - 10진수 **-123.25** = 2진수로 **-1111011.01** 이다.
  - 여기서, **정수부분** $123 = 2^6 + 2^5 + 2^4 + 2^3 + 2^1 + 2^0 = 1111011$
  - **소수부분** $0.25 = 2^{-2} = 0.01$이다. 
  - 소수부분은 계산이 어려울 경우 아래 10진수 소수의 2진수 변환 방법을 참고 (출처: [https://angrymoon.tistory.com/432](https://angrymoon.tistory.com/432))
    
<p align="center"><img src="/assets/images/heading.png" width="350px" height="370px"></p>

아래 설명은 [Jseo Doodle님 글](https://bigpel66.oopy.io/library/c/chewing-c/4)을 참고하였음.

  - 이제 $-1111011.01$ 를 1.xxx 형태로 바꿔서, $-1111011.01 = -1.11101101 \times 2^6$ 으로 표현할 수 있다. <br> (2진수이므로 $10^6$ 이 아닌 $2^6$ 을 곱해줌)
  - 위와 같은 표현을 **과학적 기수법**이라고 한다.

- <u>float 자료형의 부동 소수점 방식 저장</u>
- $-1.11101101 \times 2^6$ 를 **부호, 지수부, 가수부**로 구분해 0, 1로만 표현하면,
  - **부호** : **0 = 양수, 1 = 음수를 의미**. 음수이므로 현재는 **1**
  - **지수부** : $2^6$ 에서 지수부는 **6**에 해당하는데, 컴퓨터는 과학적 기수법으로 표현한 값을 바로 메모리에 할당하지 않고 지수부에 **편향 값(Bias)**을 더하여 저장함.

    **편향값(Bias)은 무엇인가?**
    - 먼저, 편향 값을 더하는 이유는 지수부에서 음수가 나오지 않게 하기 위함. 
    - 지금 예시처럼 -123.25가 아닌 0.625만을 저장하는 상황이라면 0.625는 이진수로 0.101이고, 0.101을 1.xxx 형태로 표현하면 $1.01 \times 2^{-1}$ 이다. 이 때 지수부는 -1이 되는데 0,1만 사용하는 컴퓨터에서는 다르게 표현이 필요하여 기본적으로 편향 값을 더해줌
    - 편향 값은 지수부에 8 bit를 이용하는 float의 경우 127을 편향 값으로,  11 bit를 사용하는 double의 경우 1023를 편향 값으로 한다. (지수부가 $N$ bit일 때, $Bias = 2^{N-1}-1$)
    - **따라서, 지수부는 2의 승수 6 + (float일 때) 편향 값 127 = 133이 되고, 133을 2진수로 표현한 10000101 (8 bit)이 된다.**

  - **가수부** : **1.xxx**로 표현했을 때 **xxx 부분에 해당**. 즉, -1.1101101에서 . 다음의 **11101101**을 나타냄.<br>
<br>

**최종적으로 아래 그림과 같이 32 bit(4 byte)에 float이 저장된다** <br>
(그림 출처: [https://youtu.be/SlkMOaKe7HQ](https://youtu.be/SlkMOaKe7HQ))



<img src="/assets/images/float.png" width="1000px" height="550px">



