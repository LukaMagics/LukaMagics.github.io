---
title: "[Linux] 리눅스 정규표현식과 grep"

categories:
  - linux
tags:
  - [linux, 정규표현식, RE, Regular Expression, grep]

toc: true
toc_sticky: true
comments: true
use_math: true
date: 2022-06-03
last_modified_at: 2022-06-03
---

📌 **작성자 개발 환경** <br>
**OS** : Ubuntu <br>
**Language** : None<br>
**Tool** : None<br>
{: .notice--primary}

## 정규표현식(Regular Expression)

- 정규 표현식: 특정한 규칙을 가진 문자열의 집합을 표현하는 데 사용하는 일종의 형식
    - `^`: 문자열의 시작
    - `$`: 문자열의 끝
    - `\d`: 숫자
    - `\D`: 숫자가 아닌 것
    - `.`: 하나의 문자와 대응
    - `\w`: 알파벳 대소문자, 숫자, 언더스코어(_)
    - `\W`: `\w`가 아닌 것
    - `\b`: 단어구분자(띄어쓰기)
    - `\s`: 공백문자
    - `\S`: 공백문자가 아닌 것
    - `\n`: 개행문자
    - `\`: 메타 문자를 문자 그대로 사용 (`\^` = "^"과 대응)
    - `\t`: 탭(Tab) 문자

- 선택 패턴
    - `|`: or을 의미 
        - `luka|magic`: luka와 magic 모두 포함해 둘 중 하나와 대응
    - `[]`: 대괄호 속에 넣은 문자 중에서 하나에 매칭
        - `[0-9]`: 0~9까지의 숫자 하나에 매칭
        - `[A-Z]`: A~Z 알파벳 대문자 하나에 매칭
        - `[]`내의 `^` 기호는 not의 의미를 가짐

- 수량 한정자
    - `?`: (앞의 문자에 대해) 0개 또는 1개
        - `lukamagics?`: `lukamagic`과 `lukamagics` 모두 포함
    - `*`: (앞의 문자에 대해) 0개 이상
        - `ab*`: b=0인 `a`, b=1인 `ab`, b=4인 `abbbb` 등을 포함
    - `+`: (앞의 문자에 대해) 1개 이상
        - `ab+`: b=1인 `ab`, b=4인 `abbbb` 등을 포함
    - `{n}`: (앞의 문자에 대해) 중괄호 안의 n개 만큼 대응
        - `a{2}` = aa
        - `a{3}` = aaa
    - `{n, m}`: (앞의 문자에 대해) n ~ m개만큼 대응
        - `a{2,3}` = aa, aaa
        - `{n, }`: n개 이상

- 그룹 패턴(`()`)
    - `()`는 그룹을 나타내며, `(표현식)` 형태로 사용
    - 그룹은 전체 패턴 내에서 하나로 묶여지는 패턴.
    - 한 번 생성한 그룹은 재사용 가능하며, 만들어진 순서로 1번, 2번, 3번으로 참조 가능
        - `(표현식1)` => `\1`
        - `(표현식2)` => `\2`
        - 예를 들어, `(to)ma\1`는 `tomato`와 대응됨

## 정규표현식 에시

- 휴대 전화번호: `^010(\D?\d{4}){2}`
    - `^010`: 시작문자가 010
    - `(\D?\d{4})`: `()`안의 패턴과 대응
        - `\D?`: 숫자가 아닌 문자 1개 또는 없음
        - `\d{4}`: 숫자 4개
    - `{2}`: 앞의 `(\D?\d{4})` 패턴이 2번

```py
import re

phone_numbers = ["010-1234-5678", "01011112222", "011-3333-4444", "010-55556666"]

for number in phone_numbers:
    p = re.match("^010(\D?\d{4}){2}", number)
    if p:
        print(p.group())
        print(re.sub("[^0-9]", "", p.group()))
        print()

'''
010-1234-5678
01012345678

01011112222
01011112222

010-55556666
01055556666
'''
```

- 일반 전화번호까지 포함하고 그룹 패턴을 쓰지않으면 아래처럼 표현할 수도 있다
    - `[0-9]{2,3}\D?[0-9]{3,4}\D?[0-9]{4}`

## grep

- grep은 global regular expression print의 약자로 리눅스 명령어이다.
- grep 명령은 파일 내용 중 지정한 패턴이나 문자열(정규표현식)을 찾은 후 해당 패턴을 포함하고 있는 모든 행을 출력한다.
- 사용 형태: `grep [option] [pattern] [파일명]`
    - option은 다음과 같다.
        - `-i`: 대소문자를 구분하지 않고 검색
        - `-v`: 패턴과 일치하지 않는 행을 출력
        - `-c`: 패턴과 일치하는 행의 개수를 출력
        - `-w`: 패턴과 단어 단위로 매칭되어야 출력
- 사용 예시
    - `grep hello test.txt`: test.txt 파일에서 'hello'라는 문자열이 들어 있는 모든 행을 출력
    - `grep [0-9] test.txt`: test.txt 파일에서 숫자가 존재하는 모든 행 출력
    - `grep "hello\. world\." *`: 현재 디렉토리의 모든 파일에서 hello. world.를 찾아 출력
    - `grep -v ^# test.txt`: test.txt 파일에서 #으로 시작하지 않는 행 모두 출력