---
title: "[Linux] ë¦¬ëˆ…ìŠ¤ File Redirection, Piping Command, Mount"

categories:
  - linux
tags:
  - [linux, file redirection, pipe, mount]

toc: true
toc_sticky: true
comments: true
use_math: true
date: 2022-06-04
last_modified_at: 2022-06-06
---

ğŸ“Œ **ì‘ì„±ì ê°œë°œ í™˜ê²½** <br>
**OS** : Ubuntu <br>
**Language** : None<br>
**Tool** : None<br>
{: .notice--primary}

## Standard Stream

- Unix ê³„ì—´ OSì—ì„œ í”„ë¡œê·¸ë¨ê³¼ ì£¼ë³€ ì¥ì¹˜(í‚¤ë³´ë“œ, ëª¨ë‹ˆí„° ë“±) ì‚¬ì´ì— ë¯¸ë¦¬ ì—°ê²°ëœ I/O í†µë¡œë¥¼ **Stream**ì´ë¼ê³  í•œë‹¤.

- ë¦¬ëˆ…ìŠ¤ì—ì„œ í”„ë¡œê·¸ë¨(ë˜ëŠ” íŒŒì¼)ì˜ ì‹¤í–‰(ì—°ì‚°) ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ Standard Streamì´ ì—´ë¦°ë‹¤. Standard Streamì€ í‘œì¤€ ì…ë ¥, í‘œì¤€ ì¶œë ¥, í‘œì¤€ ì˜¤ë¥˜ ì¶œë ¥ìœ¼ë¡œ ë¶„ë¥˜ëœë‹¤.
    - `stdin`: í‚¤ë³´ë“œ ì…ë ¥ì„ ìœ„í•œ ìŠ¤íŠ¸ë¦¼
    - `stdout`: í™”ë©´ ì¶œë ¥ì„ ìœ„í•œ ìŠ¤íŠ¸ë¦¼ (`cat`, `ls` ë“±)
    - `stderr`: ì˜¤ë¥˜ ë‚´ìš© ì¶œë ¥ì„ ìœ„í•œ ìŠ¤íŠ¸ë¦¼ (ê³„ì • ê¶Œí•œ, No such file ë“±ì˜ error)

### File Descriptor

- ìœ ë‹‰ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ëª¨ë“  ê²ƒì€ íŒŒì¼ì´ë‹¤. Regularfile, Directory, Socket, PIPE, Block Device, Character Device ë“± ëª¨ë“  ê°ì²´ë“¤ì„ íŒŒì¼ë¡œ ê´€ë¦¬í•œë‹¤.
- File Descriptor(FD)Linux/Unix ê³„ì—´ ì‹œìŠ¤í…œì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì¼ì´ë‚˜ ì…ë ¥/ì¶œë ¥ì— ì ‘ê·¼í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì¶”ìƒì ì¸ ê°’ì´ë‹¤.
- FDëŠ” 0ì´ ì•„ë‹Œ ì •ìˆ˜ê°’ì„ ê°€ì§€ê³ , í”„ë¡œì„¸ìŠ¤ì—ì„œ ì—´ë¦° íŒŒì¼ë“¤ì„ ê´€ë¦¬í•˜ëŠ” í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤ë‹¤.
- ë¦¬ëˆ…ìŠ¤ì—ì„œ FDê°€ 1024ê°œê°€ ìˆë‹¤ê³  ê°€ì •í•˜ë©´, ê¸°ë³¸ì ìœ¼ë¡œ ì…ë ¥, ì¶œë ¥, ì˜¤ë¥˜ ì¶œë ¥ì„ ìœ„í•´ 0, 1, 2ì˜ FDë¥¼ ê°ê° í• ë‹¹í•œë‹¤. index 3ë¶€í„°ì˜ FD (ê°€ì¥ ì‘ì€ ìˆ«ìì˜ FD)ë¶€í„° openë˜ëŠ” íŒŒì¼ì— FDë¥¼ í• ë‹¹ ë°›ëŠ”ë‹¤.(**ë‚´ìš© ê²€ì¦ í•„ìš”**)


## File Redirection

- FDë¥¼ í†µí•´ í‘œì¤€ ì…ì¶œë ¥/ì—ëŸ¬ ë“± í‘œì¤€ ìŠ¤íŠ¸ë¦¼ì´ ìš´ìš©ë˜ëŠ”ë° Redirectionì„ í†µí•´ ê° ìŠ¤íŠ¸ë¦¼ì˜ ë°©í–¥ì„ ì¬ì§€ì •í•  ìˆ˜ ìˆë‹¤.
- File Redirectionì€ í‘œì¤€ ìŠ¤íŠ¸ë¦¼ì˜ íë¦„ì„ ë°”ê¾¸ì–´ ì¼ë°˜ì ì¸ í‘œì¤€ ì…ë ¥ ë° ì¶œë ¥, ì˜¤ë¥˜(FD 0~2?)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ê²½ë¡œì¸ íŒŒì¼(FD 3~)ë¡œ ì¬ì§€ì •í•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤.

- File Redirection ì‚¬ìš© ì˜ˆ[(ì¶œì²˜)](https://gracefulprograming.tistory.com/100)
    - `> file`: í‘œì¤€ ì¶œë ¥ì„ `file`ë¡œ redirectioní•œë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±í•˜ê³ , íŒŒì¼ì´ ìˆìœ¼ë©´ ë®ì–´ì”ë‹ˆë‹¤.
        - `cat test.txt > test.out`: "cat test.txt"ì˜ ì¶œë ¥ ê²°ê³¼ë¥¼ test.out íŒŒì¼ë¡œ ì €ì¥ (= `cat test.txt 1> test.out`)
        - `cat tesst.txt 2> err.txt`: tesst.txtëŠ” ì—†ëŠ” íŒŒì¼ë¡œ No such file ~ ì—ëŸ¬ ì¶œë ¥ ê²°ê³¼ë¥¼ err.logì— ì €ì¥.

    - `>> file`: í‘œì¤€ ì¶œë ¥ì„ `file`ë¡œ redirectioní•œë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±í•˜ê³ , ê¸°ì¡´ íŒŒì¼ì´ ìˆìœ¼ë©´ íŒŒì¼ ëì— ë‚´ìš©ì„ ë§ë¶™ì¸ë‹¤.
        - `cat test.txt >> test.out`: "cat test.txt"ì˜ ì¶œë ¥ ê²°ê³¼ë¥¼ test.out íŒŒì¼ë¡œ ì €ì¥ ë˜ëŠ” ëì— ë§ë¶™ì„

    - `< file`: íŒŒì¼ë¡œë¶€í„° í‘œì¤€ ì…ë ¥ì„ ë°›ë„ë¡ redirection.
        - `cat < test.txt`: cat ëª…ë ¹ì–´ì˜ ì…ë ¥ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ test.txtë¥¼ ë³´ë‚¸ ê²ƒ
        - `python add1.py < input.txt` ì´ëŸ° í˜•íƒœë¡œ ì†ŒìŠ¤ ì½”ë“œ(.py)ì˜ ì…ë ¥ ê°€ëŠ¥ 
        
        ```py
        # sum.py
        num = input()
        print(num + 1)
        ```

## Piping Command

- PipeëŠ” ë‘˜ ì´ìƒì˜ ëª…ë ¹ì–´ë¥¼ ë¬¶ì–´ ì¶œë ¥ì˜ ê²°ê³¼ë¥¼ ë‹¤ë¥¸ ëª…ë ¹ìœ¼ë¡œ ì „í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
- ëª…ë ¹ì–´ì˜ í‘œì¤€ ì¶œë ¥ì„ ë˜ ë‹¤ë¥¸ ëª…ë ¹ì–´ì˜ í‘œì¤€ ì…ë ¥ìœ¼ë¡œ ì—°ê²°
- `|`ê¸°í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ë ¹ì–´ì™€ ëª…ë ¹ì–´ë¥¼ ì—°ê²°

- ì‚¬ìš© ì˜ˆì‹œ
  - `head test.txt | grep [0-9]`: headë¥¼ í†µí•´ test.txt ì²˜ìŒ 10ì¤„ ë‚´ìš©ì„ grep ëª…ë ¹ìœ¼ë¡œ ì „ë‹¬ -> grepì„ í†µí•´ ìˆ«ìê°€ í¬í•¨ëœ í–‰ë§Œ ì¶œë ¥
  - `ls -l | grep user1 > output.txt`: í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ í´ë” ë° íŒŒì¼ ëª©ë¡(ë¬¸ìì—´)ì—ì„œ user1ì´ ë“¤ì–´ê°„ ëª©ë¡ì˜ ì¶œë ¥ì„ output.txtì— ì €ì¥

### pipeì™€ file redirectionì˜ ì°¨ì´

- `python3 add1.py < input.txt`: input.txt ë‚´ìš© ìì²´ë¥¼ íŒŒì´ì¬ ì½”ë“œì˜ ì…ë ¥ê°’ìœ¼ë¡œ ì‚¬ìš©
- `cat test.txt | python3 add1.py`: cat ëª…ë ¹ì–´ í”„ë¡œì„¸ìŠ¤ì˜ ì¶œë ¥ ê²°ê³¼ë¥¼ python ì½”ë“œì˜ ì…ë ¥ê°’ìœ¼ë¡œ ì‚¬ìš© (í”„ë¡œì„¸ìŠ¤1 -> í”„ë¡œì„¸ìŠ¤2)

## Mount

- ë¦¬ëˆ…ìŠ¤ëŠ” `mount`ë¥¼ í†µí•´ USB ë“± ë³´ì¡°ê¸°ì–µì¥ì¹˜ë¥¼ ë””ë ‰í† ë¦¬ì— ì—°ê²°ì‹œì¼œì£¼ì–´ì•¼í•œë‹¤.
  - Windowsì—ì„œëŠ” í•˜ë“œ, USB ë“± ë³´ì¡°ê¸°ì–µì¥ì¹˜ë¥¼ ì—°ê²°í•˜ë©´ ìë™ìœ¼ë¡œ í´ë”ì— ì—°ê²°ë¨(Plug and Play; PnP)
- `mount [option] [device] [directory]`
  - ë¦¬ëˆ…ìŠ¤ì—ì„œ USBë¥¼ ë§ˆìš´íŠ¸í•˜ê¸° ìœ„í•´ ë””ë°”ì´ìŠ¤ì˜ íŒŒì¼ ì‹œìŠ¤í…œ ëª…(device)ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„  `fdisk -l`ë¥¼ ì…ë ¥
  - `-a`: /etc/fstabì— ëª…ì‹œëœ íŒŒì¼ ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸ í•  ë•Œ ì‚¬ìš©
  - `-t`: íŒŒì¼ ì‹œìŠ¤í…œì˜ ìœ í˜•ì„ ì§€ì •í•˜ê³ ì í•  ë•Œ ì‚¬ìš©, ìƒëµí•  ì‹œ /etc/fstab íŒŒì¼ì„ ì°¸ì¡°
  - `-o`: ì¶”ê°€ì ì¸ ì„¤ì •ì„ ì ìš©í•  ë•Œ ì‚¬ìš©, ë‹¤ìˆ˜ì˜ ì¡°ê±´ì„ ì ìš©í•  ë•ŒëŠ” ì½¤ë§ˆ(`,`)ë¡œ êµ¬ë¶„
- `remount [device] [directory]`: ì´ë¯¸ mountëœ deviceë¥¼ ì·¨ì†Œí•˜ëŠ” ëª…ë ¹ì–´
- `df`: í˜„ì¬ mountëœ ë””ìŠ¤í¬ ì •ë³´ ì¶œë ¥