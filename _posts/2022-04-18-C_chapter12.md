---
title: "[C] ν¬μΈν„°_Chapter12"

categories:
  - cpp
tags:
  - [Cμ–Έμ–΄, ν¬μΈν„°]

toc: true
toc_sticky: true
comments: true
use_math: true
date: 2022-04-17
last_modified_at: 2022-04-17
---

π“ **μ‘μ„±μ κ°λ° ν™κ²½** <br>
**OS** : Windows 10 <br>
**Language** : C<br>
**Tool** : Visual Studio Code<br>
{: .notice--primary}

# ν¬μΈν„°(pointer)

- Cμ–Έμ–΄μ—μ„ ν¬μΈν„°λ” **λ³€μμ μ£Όμ† κ°’(address)λ¥Ό μ €μ¥ν•λ” λ³€μ**
- ν¬μΈν„° μ„ μ–Έ
    - μ„ μ–Έ ν•μ‹: `μ°Έμ΅°μλ£ν• *ν¬μΈν„°μ΄λ¦„;` (asteriskμ μ„μΉλ” μλ£ν• μ΄λ¦„ μ‚¬μ΄ μ•„λ¬΄λ°λ‚ κ°€λ¥)
    - 'μ°Έμ΅° μλ£ν•'μ΄λ€ ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒ λ³€μμ μλ£ν•
- λ³€μμ μ£Όμ† κ°’ ν™•μΈ
    - `&` λ¬Έμλ¥Ό λ³€μλ‚ ν¬μΈν„°μ™€ ν•¨κ» μ‚¬μ©

```c
#include <stdio.h>

int main(void)
{
    int a;
    int *pa;

    a = 36;    // RAMμ— a λ³€μμ μ£Όμ†κ°’μ— 36μ΄ μ €μ¥λ¨
    pa = &a;   // aμ μ£Όμ†κ°’μ„ pa ν¬μΈν„°(λ³€μ)μ— μ €μ¥
    *pa = 99;  

    printf("%d\n", a);

    return 0;
}
```

## ν¬μΈν„° μ‘μ©

### λ°°μ—΄κ³Ό ν¬μΈν„°μ κ΄€κ³„

- λ°°μ—΄ μ›μ†μ ν•©μ„ κµ¬ν•λ” ν”„λ΅κ·Έλ¨
    - `p[i]==*(p+i)==a[i]==*(a+1)`

```c
#include <stdio.h>

int main(void)
{
    double a[5];
    int i, len = 5;
    double value = 1.1;
    double *p;
    double sum_p = 0.0, sum_a = 0.0;

    p = a;   
    // aμ μ‹μ‘ μ£Όμ†λ¥Ό pμ— μ €μ¥. μ¦‰, a[0] == *(a+0) == p[i] == *(p+0)
    // p = &a λλ” *p = a, *p = &a λ¨λ‘ κ°™μ€κ°€?

    for(i=0; i<len; i++){
        p[i] = value;    // double p[5] = {1.1, 2.2, ..., 5.5};
        value += 1.1;
    }
    
    for(i=0; i<len; i++){
        printf("%g ", p[i]);   // %gλ” μ†μμ  λ’¤ 0μ„ μ μ™Έν•΄μ„ μ‹¤μ μ¶λ ¥
        sum_p += p[i];
    }
    printf("\n");

    for(i=0; i<len; i++){
        printf("%g ", a[i]);   
        sum_a += a[i];
    }
    printf("\n");
    printf("sum = %g\n", sum_p);
    printf("sum = %g\n", sum_a);

    return 0;
}

/*
1.1 2.2 3.3 4.4 5.5 
1.1 2.2 3.3 4.4 5.5
sum = 16.5
sum = 16.5
*/
```

- pμ κ°’μ„ λ°”κΏ¨μ§€λ§ aκ°€ λ°”λ€λ‹¤.



### ν•¨μ μΈμλ΅ μ‚¬μ©ν•κΈ°

- μ λ“κ°’μ„ κµ¬ν•λ” ν•¨μ λ§λ“¤κΈ°

```c
#include <stdio.h>

void absolute(int *x)   // ν¬μΈν„°λ΅ μΈμλ¥Ό λ°›μ•„ κ°’μ„ λ°”λ΅ λ³€κ²½ν•κΈ° λ•λ¬Έμ— returnμ„ ν™μ©ν•  ν•„μ”μ—†μΌλ―€λ΅ void
{
    if(*x < 0)
        *x = -*x;

    return ;
}

int main(void)
{
    int value = -37;

    absolute( &value );
    printf("%d\n", value);

    value = 56;

    absolute( &value );
    printf("%d\n", value);
    
    return 0;
}
```


### λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό ν•΄μ 

- λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό ν•΄μ 
    - λ³€μλ¥Ό μ„ μ–Έν•μ§€ μ•κ³ λ„ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ‹ ν•„μ”μ— λ”°λΌ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήλ°›μ•„ μ‚¬μ©ν•κ³  ν•΄μ 

- λ™μ  ν• λ‹Ήμ΄ ν•„μ”ν• μ΄μ 
    - μ»΄ν“¨ν„° μ‹μ¤ν…μ λ©”λ¨λ¦¬λ” ν•μ •λμ–΄ μμ–΄ ν”„λ΅κ·Έλ¨ ν•λ‚μ— ν• λ‹Ήν•  μ μλ” λ©”λ¨λ¦¬ μμ—­μ΄ μ ν•μ μ΄κΈ° λ•λ¬Έ

- ν• λ‹Ή λ° ν•΄μ 
    - `<stdlib.h>`λ‚ `<malloc.h>` ν—¤λ” νμΌμ„ ν¬ν•¨
    - ν• λ‹Ή: malloc() ν•¨μ
    - ν•΄μ : free() ν•¨μ
    - μ‚¬μ© ν•νƒ
        `void *malloc(size_t size);`
        `void free(void *p);`
    - void *μλ£ν•μΌλ΅ λ¦¬ν„΄ν•κΈ° λ•λ¬Έμ— μ‹¤μ λ΅ μ–΄λ–¤ ν¬μΈν„°μ— μ €μ¥ν•κΈ° μ„ν•΄μ„λ” ν•΄λ‹Ή ν¬μΈν„° μλ£ν•μΌλ΅ ν• λ³€ν™μ„ ν•΄μ•Ό ν•¨

- ν• λ‹Ή λ° ν•΄μ : μμ‹

```c
int *p = (int *)malloc(sizeof(int));  // int ν•μ μ‚¬μ΄μ¦(4 byte)λ§νΌμ„ ν• λ‹Ήν•κ³  int pointerλ΅ λ…μ‹μ  ν• λ³€ν™
free(p);  // λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή(malloc) ν›„ λ°λ“μ‹ ν•΄μ λ¥Ό ν•΄μ¤μ•Όν•¨
```

- ν• λ‹Ή λ° ν•΄μ : μ‹¤μµ

```c
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    double d = 5.1;
    double *p;
    
    p = &d;
    *p = 3.8;

    printf("*p== %g, d == %g\n", *p, d);   // *p== 3.8, d == 3.8

    p = (double *) malloc( sizeof(double) );
    *p = 5.8;

    printf("*p == %g\n", *p);   // *p == 5.8

    free(p);

    return 0;
}
```